<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // 组件通信，一个触发与监听的过程
    class EventEmitter {
      constructor() {
        // 存储事件
        console.log('this.events');
        console.log(this.events);
        
        this.events = this.events || new Map()
      }
      // 加上static属于构造函数本身
      static name='Dmast'
      static test(){
        console.log(1111114444);
      }
      // 监听事件
      addListener(type, fn) {
        if (!this.events.get(type)) {
          this.events.set(type, fn)
        }
      }
      // 触发事件
      emit(type) {
        let handle = this.events.get(type)
        handle.apply(this, [...arguments].slice(1))
      }
    }

    // EventEmitter.test()
    // console.log(EventEmitter.name);
    
    // 测试
    let emitter = new EventEmitter()
    // 监听事件
    // emitter.addListener('ages', age => {
    //   console.log(this);
    //   console.log(age);
    // })
    emitter.addListener('ages', function(age) {
      console.log(this);
      console.log(age)
    })
    // 触发事件
    emitter.emit('ages', 18)  // 18
  </script>
</body>

</html>