<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    /**
 * 单列模式第一种写法
 */
    // var single =(function(){
    //   let instance
    //   function Person(name){
    //     this.name=name
    //   }
    //   function getInstance(name){
    //     if(!instance){
    //       instance=new Person(name)
    //     }
    //     return instance
    //   }
    //   return {getInstance}
    // })()

    // var a = single.getInstance('Dmast')
    // var b = single.getInstance('Dmast2')
    // var c = single.getInstance('Dmast3')
    // console.log(a);
    // console.log(b);
    // console.log(c);

    // console.log(a===b);


    /**
     * 单例模式第二种写法
     */
    // var single = (function () {
    //   function Person(name) {
    //     this.name=name
    //   }
    //   Person.getInstance = function (name) {
    //     if (!this.instance) {
    //       this.instance = new Person(name)
    //     }
    //     return this.instance
    //   }
    //   return {getInstance:Person.getInstance}
    // })()
    // var a = single.getInstance('aaa')
    // var b = single.getInstance('bbb')
    // console.log(a);
    // console.log(b);
    
    // console.log(a === b);

    /**
     * 单例模式第三种写法
     */

    // function SetManager(name) {
    //   this.manager = name;
    // }

    // SetManager.prototype.getName = function () {
    //   console.log(this.manager);
    // };

    // var SingletonSetManager = (function () {
    //   var manager = null;
    //   return function(name){
    //     if(!manager){
    //       manager=new SetManager(name)
    //     }
    //     return manager
    //   }
    // })();

    // SingletonSetManager('a').getName(); // a
    // SingletonSetManager('b').getName(); // a
    // SingletonSetManager('c').getName(); // a

    /**
     * 第四种写法
    */

    function getSingleton(fn) {
      var instance = null;
      return function () {
        if (!instance) {
          // instance = fn.apply(this, arguments);
          instance = fn(...arguments);
        }

        return instance;
      }
    }
    // 获取单例
    var managerSingleton = getSingleton(function (name) {
      var manager = new SetManager(name);
      return manager;
    });

    managerSingleton('a').getName(); // a
    managerSingleton('b').getName(); // a
    managerSingleton('c').getName(); // a


  </script>
</body>

</html>